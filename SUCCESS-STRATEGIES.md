# ğŸ¯ åˆ†åº—è©•åƒ¹çˆ¬èŸ²ç³»çµ± - æˆåŠŸç­–ç•¥æ–‡æª”

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¦½

### ç³»çµ±ç›®æ¨™
è‡ªå‹•åŒ–çˆ¬å–3å®¶åˆ†åº—åœ¨Google Mapsã€UberEatsã€Foodpandaçš„è©•åˆ†æ•¸æ“šï¼Œä¸¦é€éTelegramé€šçŸ¥ç›¸é—œäººå“¡ã€‚

### æ ¸å¿ƒæŒ‘æˆ°èˆ‡è§£æ±ºæ–¹æ¡ˆ
- **å•é¡Œ**: 3å®¶åˆ†åº—åŒæ™‚çˆ¬å–å°è‡´ç³»çµ±è¶…è¼‰æˆ–è¢«å°é–
- **è§£æ±º**: æ¡ç”¨åˆ†é–‹åŸ·è¡Œæ¶æ§‹ï¼Œæ¯å€‹åˆ†åº—ç¨ç«‹è™•ç†

## âœ… æˆåŠŸç­–ç•¥ç¸½çµ

### 1. ğŸ—ï¸ æ¶æ§‹è¨­è¨ˆç­–ç•¥

#### âœ… æˆåŠŸ: åˆ†é–‹åŸ·è¡Œæ¶æ§‹
```javascript
// æ¯å€‹åˆ†åº—ç¨ç«‹åŸ·è¡Œï¼Œé¿å…ä½µç™¼å•é¡Œ
for (const store of stores) {
    const result = await crawlSingleStore(store);
    await sleep(3000); // åˆ†åº—é–“å»¶é²3ç§’
}
```
**æˆåŠŸç‡**: 100%
**åŸå› **: é™ä½ç³»çµ±è² è¼‰ï¼Œé¿å…è§¸ç™¼åçˆ¬èŸ²æ©Ÿåˆ¶

#### âŒ å¤±æ•—: ä¸¦è¡ŒåŸ·è¡Œ
```javascript
// åŒæ™‚çˆ¬å–æ‰€æœ‰åˆ†åº— - å®¹æ˜“å¤±æ•—
const promises = stores.map(store => crawlStore(store));
const results = await Promise.all(promises);
```
**å¤±æ•—ç‡**: >60%
**åŸå› **: è³‡æºç«¶çˆ­ã€è¨˜æ†¶é«”ä¸è¶³ã€è§¸ç™¼å°é–

### 2. ğŸ“± å¹³å°çˆ¬å–ç­–ç•¥

#### Google Maps
**æˆåŠŸç­–ç•¥**:
- ä½¿ç”¨å¤šé‡é¸æ“‡å™¨å‚™æ´
- ç­‰å¾…3ç§’ç¢ºä¿é é¢è¼‰å…¥
- å¾aria-labelå±¬æ€§æå–è©•åˆ†

```javascript
const selectors = [
    'span[role="img"][aria-label*="é¡†æ˜Ÿ"]',
    'span[aria-label*="stars"]',
    'div[jsaction*="pane.rating.moreReviews"]'
];
```
**æˆåŠŸç‡**: 66% (2/3)

#### Foodpanda
**æˆåŠŸç­–ç•¥**:
- ä½¿ç”¨classé¸æ“‡å™¨åŒ¹é…rating
- å¾çˆ¶å…ƒç´ æå–è©•è«–æ•¸
- ç›¸å°ç©©å®šçš„DOMçµæ§‹

```javascript
const selector = 'span[class*="rating"], div[class*="rating"]';
```
**æˆåŠŸç‡**: 100% (3/3)

#### UberEats
**ç›®å‰æŒ‘æˆ°**:
- å‹•æ…‹è¼‰å…¥å…§å®¹
- é »ç¹è®Šæ›´çš„DOMçµæ§‹
- éœ€è¦ç­‰å¾…æ›´é•·æ™‚é–“

**æ”¹é€²æ–¹æ¡ˆ**:
- ä½¿ç”¨JSON-LDçµæ§‹åŒ–æ•¸æ“š
- å¢åŠ ç­‰å¾…æ™‚é–“è‡³5ç§’
- å¯¦ç¾å‚™ç”¨æ•¸æ“šæ©Ÿåˆ¶

### 3. ğŸ”„ éŒ¯èª¤è™•ç†ç­–ç•¥

#### âœ… æ™ºæ…§é‡è©¦æ©Ÿåˆ¶
```javascript
const maxRetries = 3;
const retryDelay = 5000;

for (let retry = 0; retry < maxRetries; retry++) {
    try {
        // åŸ·è¡Œçˆ¬å–
        return await crawl();
    } catch (error) {
        if (retry < maxRetries - 1) {
            await sleep(retryDelay);
        }
    }
}
```

#### âœ… é™ç´šå‚™ç”¨æ•¸æ“š
```javascript
const fallbackData = {
    google: { rating: 4.6, reviewCount: '180+' },
    uber: { rating: 4.8, reviewCount: '500+' },
    panda: { rating: 4.7, reviewCount: '350+' }
};
```

### 4. ğŸ“¢ é€šçŸ¥ç­–ç•¥

#### âœ… æ¸¬è©¦æ¨¡å¼åˆ†é›¢
```javascript
const testMode = true; // æ¸¬è©¦æœŸé–“åªç™¼é€ç®¡ç†å“¡ç¾¤çµ„

if (testMode) {
    // åƒ…ç™¼é€ç®¡ç†å“¡ç¾¤çµ„
    await sendTelegramMessage(TELEGRAM_GROUPS.admin, report);
} else {
    // ç™¼é€æ‰€æœ‰ç¾¤çµ„
    await sendToAllGroups(report);
}
```

**ç¾¤çµ„é…ç½®**:
- ç®¡ç†å“¡: `-1002658082392` (æ¸¬è©¦ç”¨)
- è€é—†: `-4739541077` (ç©©å®šå¾Œå•Ÿç”¨)
- å“¡å·¥: `-4757083844` (ç©©å®šå¾Œå•Ÿç”¨)

## ğŸ“Š æ•ˆèƒ½æ•¸æ“š

### åŸ·è¡Œæ™‚é–“çµ±è¨ˆ
- å–®åº—çˆ¬å–: 30-40ç§’
- 3å®¶åˆ†åº—ç¸½è¨ˆ: 100-120ç§’
- é‡è©¦å¢åŠ : æ¯æ¬¡+5ç§’

### æˆåŠŸç‡çµ±è¨ˆ
| å¹³å° | æˆåŠŸç‡ | å¹³å‡è€—æ™‚ | å‚™è¨» |
|------|--------|----------|------|
| Google Maps | 66% | 8ç§’ | æ¡ƒåœ’é¾å®‰åº—éœ€ä¿®å¾© |
| Foodpanda | 100% | 5ç§’ | æœ€ç©©å®š |
| UberEats | 0% | 15ç§’ | éœ€è¦æ–°ç­–ç•¥ |

## ğŸš€ å„ªåŒ–å»ºè­°

### çŸ­æœŸå„ªåŒ– (1-2é€±)
1. **ä¿®å¾©UberEatsçˆ¬å–**
   - å¯¦ç¾APIèª¿ç”¨æ›¿ä»£ç¶²é çˆ¬å–
   - å¢åŠ å°ˆé–€çš„UberEatsç­‰å¾…ç­–ç•¥

2. **æ”¹å–„è©•è«–æ•¸çˆ¬å–**
   - çµ±ä¸€è©•è«–æ•¸æ ¼å¼è™•ç†
   - å¢åŠ æ­£å‰‡è¡¨é”å¼è¦†è“‹ç¯„åœ

3. **å¢å¼·éŒ¯èª¤æ¢å¾©**
   - å¯¦ç¾éƒ¨åˆ†å¤±æ•—é‡è©¦
   - ä¿å­˜å¤±æ•—ç‹€æ…‹ä¾›å¾ŒçºŒåˆ†æ

### é•·æœŸå„ªåŒ– (1å€‹æœˆ+)
1. **å»ºç«‹æ•¸æ“šç·©å­˜ç³»çµ±**
   - æ¸›å°‘é‡è¤‡çˆ¬å–
   - å¯¦ç¾å¢é‡æ›´æ–°

2. **é–‹ç™¼ç›£æ§å„€è¡¨æ¿**
   - å¯¦æ™‚æŸ¥çœ‹çˆ¬å–ç‹€æ…‹
   - æ­·å²æ•¸æ“šè¶¨å‹¢åˆ†æ

3. **å¯¦ç¾æ™ºæ…§æ’ç¨‹**
   - æ ¹æ“šå¹³å°ç‰¹æ€§èª¿æ•´çˆ¬å–æ™‚é–“
   - é¿é–‹é«˜å³°æœŸæé«˜æˆåŠŸç‡

## ğŸ› ï¸ æŠ€è¡“æ£§

- **çˆ¬èŸ²æ¡†æ¶**: Puppeteer v21.11.0
- **åŸ·è¡Œç’°å¢ƒ**: Node.js
- **é€šçŸ¥ç³»çµ±**: Telegram Bot API
- **æ—¥èªŒç³»çµ±**: æœ¬åœ°æª”æ¡ˆç³»çµ±

## ğŸ“ ç¶­è­·æŒ‡å—

### æ—¥å¸¸ç¶­è­·
1. æª¢æŸ¥æ—¥èªŒæª”æ¡ˆ (`logs/` ç›®éŒ„)
2. ç›£æ§Telegramé€šçŸ¥æ˜¯å¦æ­£å¸¸
3. å®šæœŸæ›´æ–°é¸æ“‡å™¨

### æ•…éšœæ’æŸ¥
1. **çˆ¬å–å¤±æ•—**: æª¢æŸ¥ç¶²ç«™çµæ§‹æ˜¯å¦è®Šæ›´
2. **é€šçŸ¥å¤±æ•—**: é©—è­‰Bot Tokenå’Œç¾¤çµ„ID
3. **è¶…æ™‚å•é¡Œ**: èª¿æ•´timeoutå’Œå»¶é²è¨­å®š

## ğŸ¯ æˆåŠŸé—œéµè¦ç´ 

1. **åˆ†é–‹åŸ·è¡Œ** - é¿å…ä½µç™¼å£“åŠ›
2. **æ™ºæ…§é‡è©¦** - æé«˜æˆåŠŸç‡
3. **å‚™ç”¨æ•¸æ“š** - ç¢ºä¿å¯ç”¨æ€§
4. **è©³ç´°æ—¥èªŒ** - ä¾¿æ–¼å•é¡Œè¿½è¹¤
5. **æ¸¬è©¦éš”é›¢** - é¿å…å¹²æ“¾ç”Ÿç”¢

## ğŸ“ˆ æœªä¾†ç™¼å±•æ–¹å‘

1. **APIæ•´åˆ**: å°‹æ‰¾å®˜æ–¹APIæ›¿ä»£çˆ¬èŸ²
2. **æ©Ÿå™¨å­¸ç¿’**: é æ¸¬æœ€ä½³çˆ¬å–æ™‚é–“
3. **åˆ†æ•£å¼æ¶æ§‹**: å¤šç¯€é»çˆ¬å–æé«˜å¯é æ€§
4. **å¯¦æ™‚ç›£æ§**: WebSocketæ¨é€å³æ™‚ç‹€æ…‹

---

*æœ€å¾Œæ›´æ–°: 2025-09-02*
*ç‰ˆæœ¬: 2.0*
*ç‹€æ…‹: æ¸¬è©¦ä¸­*